<link rel="import" href="/bower_components/polymer/polymer.html"/>

<dom-module id="taaabs-trace-display-icons-fix">
  <link rel="import" type="css" href="../../lib/samotraces/css/samotraces.css"/>
  <template>
    <div id="traceIcon"></div>
  </template>

  <script src="../../lib/samotraces/widgets/TraceDisplayIconsFix.js"></script>
  <script src="../../lib/samotraces/objects/TimeWindow.js"></script>

  <script>
  Polymer({
    is: "taaabs-trace-display-icons-fix",
    properties: {
      time: {
        type: Object,
        notify: true,
        reflectToAttribute: true,
        value: function() { return {}; },
        observer: '_timeChanged'
      },
      timezoom: {
        type: Object,
        notify: true,
        reflectToAttribute: true,
        value: function() { return {}; }
      },
      trace: {
        type: Object,
        notify: true,
        reflectToAttribute: true,
        value: function() { return {}; }
      }
    },
    _timeChanged: function(newValue, oldValue) {
      var options = {
        url: function(o) {
          var path = "../../lib/images/";
          switch(o["type"]) {
            case 'Ouverture_Page':
            return path + 'Orange.png';
            default:
            return path + 'help.png';
          }
        }
      };
      this.trace.list_obsels();
      new Samotraces.UI.Widgets.TraceDisplayIconsFix(this.$$("#traceIcon"), this.trace, this.time, this.timezoom, options);
    }
  });
  </script>
</dom-module>
