
<dom-module id="taaabs-local-trace">
  <style>
    :host {
      display: block;
    }
  </style>

  <template>
    <content></content>
  </template>

  <script>
    /* global Polymer, Samotraces */

    Polymer({
      is: 'taaabs-local-trace',
      properties: {
        timewindow: {
          type: Object,
          reflectToAttribute: true,
          notify: true
        },
        timewindowzoom: {
          type: Object,
          reflectToAttribute: true,
          notify: true
        },
        trace: {
          type: Object,
          notify: true,
          reflectToAttribute: true,
        },
        obselselector: {
          type: Object,
          reflectToAttribute: true,
          notify: true
        },
        options: {
          type: Object,
          reflectToAttribute: true,
          notify: true
        },
      },
      ready: function() {
        this.trace = new Samotraces.LocalTrace();
        this.obselselector = new Samotraces.Selector('Obsel');
        var that = this ;
        this.trace.on('beforLoadFile',function(){
          that.timewindow = new Samotraces.TimeWindow({start: 0, end: 0});
          that.timewindowzoom = new Samotraces.TimeWindow({start: 0, end: 20});
        });
        this.trace.on('firstObselLocal',function(e){
          that.timewindow.set_start(e.data.begin); // jshint ignore:line
        });
        this.trace.on('LastObselLocal',function(e){
          that.timewindow.set_end(e.data.begin); // jshint ignore:line
        });
      }
    });
  </script>
</dom-module>
