
<dom-module id="taaabs-ktbs">
  <style>
    :host {
      display: block;
    }
    h2 {
      margin-left: 20%;
    }
  </style>
  <template>
    <h2 id=>Interface KTBS</h2>
    <div id="ktbs-url"></div>
    <div id="list-base"></div>
  </template>

  <script>
    /* global Polymer, Samotraces */

    Polymer({
      is: 'taaabs-ktbs',
      properties: {
        basesel:{
          type: Object,
          notify: true,
          reflectToAttribute: true,
          value: function() {
            return {}; }
        },
        srcKtbs:{
          type: String,
          value: ''
        }
      },
      clickBase: function(event) {
        var baseURL = this.ktbs.id + event.target.innerHTML;
        this.basesel = new Samotraces.Ktbs.Base(baseURL);
      },
      listBaseCallback: function() {
        var baseButton = this.$['list-base'].querySelectorAll('.base');
        for (var i = 0; i < baseButton.length; i++) {
          baseButton[i].onclick = this.clickBase.bind(this);
        }
      },
      ready: function() {
        this.ktbs = new Samotraces.Ktbs.Ktbs(this.srcKtbs);
        this.$['ktbs-url'].appendChild(document.createTextNode('ID : ' + this.ktbs.id));
        var ListBasewidget = new Samotraces.Ui.Widgets.Ktbs.ListBases(this.$['list-base'], this.ktbs, '');
        ListBasewidget.on('ListBase', this.listBaseCallback.bind(this));
      }
    });
  </script>
</dom-module>
