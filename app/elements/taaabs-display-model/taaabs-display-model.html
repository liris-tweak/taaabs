
<dom-module id="taaabs-display-model">
  <template>
    <h2> Show Model </h2>
    <div id="modeldiv"></div>
  </template>

  <script>
    /* global Polymer, Samotraces */

    Polymer({
      is: 'taaabs-display-model',
      properties: {
        modelsel: {
          type: Object,
          notify: true,
          reflectToAttribute: true,
          value: function() { return {}; },
          observer: '_modelselChanged'

        },

        obseltype: {
          type: Object,
          reflectToAttribute: true,
          notify: true
        },
      },
      _modelselChanged: function() {
        var options = {
          url: function(o) {
            var path = '../../lib/Images/';
            switch(o.type) {
              case 'Ouverture_Page':
              return path+'Orange.png';
              default:
              return path+'help.png';
            }
          }
        };
        new Samotraces.Ui.Widgets.DisplayModel (this.$$('#modeldiv'), this.modelsel, options);
        //this.observObselsType();
        setTimeout(this.observObselsType.bind(this), 2000);
      },
      observObselsType: function() {
        // this is a NodeList, not an Array, so no forEach
        var obselsNodeList = this.shadowRoot.querySelectorAll('.Samotraces-obsel');
        for (var i = 0; i < obselsNodeList.length; i++) {
          var obsel = obselsNodeList[i];
          obsel.onclick = this.handleClick.bind(this);
        }
      },
      handleClick: function(event) {
        console.log('click type obsel');
        var obsel = event.target.__data__;
        //$.data(event.target, 'Samotraces-data'); // TODO we assume jquery is avaible
        this.obseltype = obsel;
      }
    });
  </script>
</dom-module>
