
<dom-module id="taaabs-obsel-inspector-type">

<style>
  paper-toast {
    z-index: 9999; /* TODO related to this issue https://github.com/PolymerElements/paper-toast/issues/14 remove this hask when Polymer fix this behavior*/
  }
</style>

<template>
  <h4>Obsel Inspector</h4>
  <paper-icon-item>
    <div>Auto Hide</div>
    <paper-toggle-button checked="{{autoHide}}"></paper-toggle-button>
  </paper-icon-item>
  <paper-icon-item>
    <div>Auto Hide Delay</div>
    <paper-slider editable min="1000" max="20000" value="{{autoHideDelay}}"></paper-slider>
  </paper-icon-item>
  <paper-toast id="toast1" text="" duration="{{autoHideDelay}}">
    <div id="obsel-inspector-type"></div>
  </paper-toast>
</template>
  <!--template>
    <div id="obsel-inspector-type"></div>
  </template-->

  <script>
    /* global Polymer, Samotraces */

    Polymer({
      is: 'taaabs-obsel-inspector-type',
      properties: {
        obselSelector: {
          type: Object,
          notify: true
        },

        autoHide: {
          type: Boolean,
          value: true,
          observer: '_autoHideChanged'
        },
        autoHideDelay: {
          type: Number,
          value: 5000
        }
      },
      observers: [
        '_obselSelectorChanged(obselSelector._changed.*)'
      ],
      _obselSelectorChanged: function() {
        if (this.autoHide) {
          var toast = this.$$('#toast1');
          toast.show();
        } else {

        }
      },
    _autoHideChanged: function(autoHideValue) {
      console.log('changed');
      console.log(autoHideValue);
      if (!autoHideValue) {
        var element = document.createElement('div');
        element.setAttribute('id', 'widget-fix');
        new Samotraces.Ui.Widgets.ObselTypeInspector(element, this.obselSelector);
        Polymer.dom(this.root).appendChild(element);
      } else {
        if (this.$$('#widget-fix')) {
          Polymer.dom(this.root).removeChild(this.$$('#widget-fix'));
        }
      }
    },
      attached: function()  {
        //this.obselSelector = new Samotraces.Selector('Obsel');
        if (this.obselSelector){
        var widgetElement = this.$$('#obsel-inspector-type');
        new Samotraces.Ui.Widgets.ObselTypeInspector(widgetElement, this.obselSelector);
        }
      }
    });
  </script>
</dom-module>
